namePrefix: ${TARGET_NAME}-ipmi-exporter-
resources:
  - external-secret.yaml
components:
  - ../../components/helm-release-oci
configMapGenerator:
  - name: values
    behavior: replace
    files:
      - values.yaml
patches:
  - target:
      kind: HelmRelease
    patch: |
      - op: add
        path: /spec/valuesFrom/-
        value:
          targetPath: modules.supermicro.user
          kind: Secret
          name: ipmi-exporter-supermicro-monitoring
          valuesKey: username
      - op: add
        path: /spec/valuesFrom/-
        value:
          targetPath: modules.supermicro.pass
          kind: Secret
          name: ipmi-exporter-supermicro-monitoring
          valuesKey: password
