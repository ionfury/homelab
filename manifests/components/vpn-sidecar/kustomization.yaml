apiVersion: kustomize.config.k8s.io/v1alpha1
kind: Component

images:
  - name: gluetun
    newName: docker.io/qmcgaw/gluetun
    newTag: v3.32.0

patches:
  - path: sidecar.yaml
    target:
      kind: Deployment

secretGenerator:
  - name: gluetun-secret
    files:
      - VPN_SERVICE_PROVIDER=config/vpn-service-provider.encrypted
      - OPENVPN_USER=config/openvpn-user.encrypted
      - OPENVPN_PASSWORD=config/openvpn-password.encrypted